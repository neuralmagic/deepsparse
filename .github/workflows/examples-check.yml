name: Example Checks
on: 
  push:
    branches:
      - main
      - 'release/*'
  pull_request:
    branches:
      - main
      - 'release/*'
      
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  
jobs:
  sparseserver-tests:
    runs-on: ubuntu-18.04
    steps:
      - name: "Upgrade pip and protobuf"
        run: pip3 install -U pip && pip3 install -U protobuf
      - name: "⚙️ Install deepsparse nightly"
        run: pip3 install deepsparse-nightly
      - name: "⚙️ Install docker"
        run: sudo apt-get install -y docker docker-compose
      - name: "🔬 Running deepsparse tests"
        run: sudo systemctl start docker && cd examples/sparseserver-ui && sudo docker-compose up --build
